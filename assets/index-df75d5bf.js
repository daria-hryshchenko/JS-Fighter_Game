var D=Object.defineProperty;var x=(e,t,n)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var E=(e,t,n)=>(x(e,typeof t!="symbol"?t+"":t,n),n),q=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var F=(e,t,n)=>(q(e,t,"read from private field"),n?n.call(e):t.get(e)),P=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)};(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function s({tagName:e,className:t,attributes:n={}}){const a=document.createElement(e);if(t){const i=t.split(" ").filter(Boolean);a.classList.add(...i)}return Object.keys(n).forEach(i=>a.setAttribute(i,n[i])),a}function H(e,t){const a=s({tagName:"div",className:`fighter-preview___root ${t==="right"?"fighter-preview___right":"fighter-preview___left"}`});return e&&(a.appendChild(B(e)),a.appendChild(j(e))),a}function B(e){const{source:t,name:n}=e;return s({tagName:"img",className:"fighter-preview___img",attributes:{src:t,title:n,alt:n}})}function j(e){const t=s({tagName:"div",className:"fighter-preview___description"});return t.innerHTML=`
    <h1>${e.name}</h1>
    <span>Health: ‚ù§Ô∏è${e.health}HP</span></br>
    <span>Attack: üó°Ô∏è${e.attack}</span></br>
    <defence>Defence: üõ°Ô∏è${e.defense}</defence></br>
  `,t}const l={PlayerOneAttack:"KeyA",PlayerOneBlock:"KeyD",PlayerTwoAttack:"KeyJ",PlayerTwoBlock:"KeyL",PlayerOneCriticalHitCombination:["KeyQ","KeyW","KeyE"],PlayerTwoCriticalHitCombination:["KeyU","KeyI","KeyO"]};async function R(e,t){return new Promise(n=>{const a=document.querySelector("#left-fighter-indicator"),i=document.querySelector("#right-fighter-indicator"),r={...e},o={...t};r.currenthealth=e.health,o.currenthealth=t.health,r.isCriticalActive=!0,o.isCriticalActive=!0;const p=(c,d,_,C,k)=>{const g=d,b=C;if(!c.isBlock&&!d.isBlock||k){g.currenthealth-=_(c,d);const m=d.currenthealth/d.health;b.style.width=d.currenthealth>=0?`${m*100}%`:"0%",m<.55&&(b.style.backgroundColor="yellow"),m<.25&&(b.style.backgroundColor="red")}g.currenthealth<=0&&n(c)},y=(c,d)=>d.every(_=>c.includes(_)),h=(c,d,_,C,k,g,b)=>{const m=c,v=d;m.pressedCombo||(m.pressedCombo=new Set),m.pressedCombo.has(g)?m.pressedCombo.delete(g):m.pressedCombo.add(g);const{isCriticalActive:$,isBlock:K}=v;y(Array.from(v.pressedCombo),b)&&$&&!K&&(C(v,_,W,k,!0),v.isCriticalActive=!1,setTimeout(()=>{v.isCriticalActive=!0},1e4))};document.addEventListener("keydown",c=>{switch(c.code){case l.PlayerOneBlock:r.isBlock=!0,f("left",r);break;case l.PlayerTwoBlock:o.isBlock=!0,f("right",o);break;default:l.PlayerOneCriticalHitCombination.includes(c.code)&&h(r,o,p,f,i,c.code,l.PlayerOneCriticalHitCombination),l.PlayerTwoCriticalHitCombination.includes(c.code)&&h(o,r,p,f,a,c.code,l.PlayerTwoCriticalHitCombination);break}}),document.addEventListener("keyup",c=>{switch(c.code){case l.PlayerOneAttack:p(r,o,T,i);break;case l.PlayerOneBlock:r.isBlock=!1,f("left",r);break;case l.PlayerTwoAttack:p(o,r,T,a);break;case l.PlayerTwoBlock:o.isBlock=!1,f("right",o);break;default:l.PlayerOneCriticalHitCombination.includes(c.code)&&h(r,c.code),l.PlayerTwoCriticalHitCombination.includes(c.code)&&h(o,c.code);break}})})}function M(e,t){return Math.random()*(t-e)+e}function T(e,t){const n=G(e)-J(t);return n>0?n:0}function G(e){const{attack:t}=e,n=M(1,2);return t*n}function J(e){const{defense:t}=e,n=M(1,2);return t*n}function W(e){const{attack:t}=e;return t*2}const f=(e,t)=>{const n=document.getElementById(`${e}-shield`),{isBlock:a}=t;a===!0&&(n.style.visibility="visible"),a===!1&&(n.style.visibility="hidden")};function z(){return document.getElementById("root")}function U(){const e=document.getElementsByClassName("modal-layer")[0];e==null||e.remove()}function V(e,t){const n=s({tagName:"div",className:"modal-header"}),a=s({tagName:"span"}),i=s({tagName:"div",className:"close-btn"});a.innerText=e,i.innerText="√ó";const r=()=>{U(),t()};return i.addEventListener("click",r),n.append(a,i),n}function Y({title:e,bodyElement:t,onClose:n}){const a=s({tagName:"div",className:"modal-layer"}),i=s({tagName:"div",className:"modal-root"}),r=V(e,n);return i.append(r,t),a.append(i),a}function Z({title:e,bodyElement:t,onClose:n=()=>{}}){const a=z(),i=Y({title:e,bodyElement:t,onClose:n});a.append(i)}function Q(e){const t=B(e),n={title:`${e.name.toUpperCase()} WON üèÜ`,bodyElement:t,onClose:()=>document.location.reload()};Z(n)}function A(e,t){const n=B(e),i=s({tagName:"div",className:`arena___fighter ${t==="right"?"arena___right-fighter":"arena___left-fighter"}`});return i.append(n),i}function X(e,t){const n=s({tagName:"div",className:"arena___battlefield"}),a=A(e,"left"),i=A(t,"right");return n.append(a,i),n}function I(e,t){const{name:n}=e,a=s({tagName:"div",className:"arena___fighter-indicator"}),i=s({tagName:"span",className:"arena___fighter-name"}),r=s({tagName:"div",className:"arena___health-indicator"}),o=s({tagName:"div",className:"arena___health-bar",attributes:{id:`${t}-fighter-indicator`}});return i.innerText=n,r.append(o),a.append(i,r),a}function ee(e,t){const n=s({tagName:"div",className:"arena___fight-status"}),a=s({tagName:"div",className:"arena___versus-sign"}),i=I(e,"left"),r=I(t,"right");return n.append(i,a,r),n}function te(e){const t=s({tagName:"div",className:"arena___root"}),n=ee(...e),a=X(...e),i=ie(...e);return t.append(n,a,i),t}function ne(e){const t=document.getElementById("root"),n=te(e);t.innerHTML="",t.append(n),R(...e).then(a=>{Q(a)})}function ie(e,t){const n=s({tagName:"div",className:"arena___shields-container"}),a=O(e,"left"),i=O(t,"right");return n.append(a,i),n}function O(e,t){const n=t==="right"?"right-shield":"left-shield",a=s({tagName:"div",className:"shiel-wrapp"}),i=s({tagName:"div",className:`${n}`,attributes:{id:`${t}-shield`}});return a.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" class="shiel-icon" viewBox="0 0 512 512"><path d="M256 481c-3.5 0-7-1.2-9.9-3.7-21.8-19.1-42.6-36.8-62.1-53.4C73.8 330 0 267.9 0 177.5 0 94 59 31 136 31c60.7 0 99.6 42.4 120 80.5C276.4 73.4 315.3 31 376 31c77 0 136 63 136 146.5 0 90.4-73.8 152.4-184 246.4-19.5 16.6-40.3 34.3-62.1 53.4C263 479.8 259.5 481 256 481z" fill="#FD3018"/><path d="M265.9 477.3c21.8-19.1 42.6-36.8 62.1-53.4C438.2 330 512 267.9 512 177.5 512 94 453 31 376 31c-60.7 0-99.6 42.4-120 80.5V481C259.5 481 263 479.8 265.9 477.3z" fill="#E61E14"/></svg>
    `,i.append(a),console.log(i),i}const ae="/JS-Fighter_Game/assets/versus-768a076e.png",re=[{_id:"1",name:"Ryu",source:"https://media.giphy.com/media/kdHa4JvihB2gM/giphy.gif"},{_id:"2",name:"Dhalsim",source:"https://i.pinimg.com/originals/c0/53/f2/c053f2bce4d2375fee8741acfb35d44d.gif"},{_id:"3",name:"Guile",source:"https://66.media.tumblr.com/tumblr_lq8g3548bC1qd0wh3o1_400.gif"},{_id:"4",name:"Zangief",source:"https://media1.giphy.com/media/nlbIvY9K0jfAA/source.gif"},{_id:"5",name:"Ken",source:"https://i.pinimg.com/originals/46/4b/36/464b36a7aecd988e3c51e56a823dbedc.gif"},{_id:"6",name:"Bison",source:"http://www.fightersgeneration.com/np5/char/ssf2hd/bison-hdstance.gif"}],se=[{_id:"1",name:"Ryu",health:45,attack:4,defense:3,source:"https://media.giphy.com/media/kdHa4JvihB2gM/giphy.gif"},{_id:"2",name:"Dhalsim",health:60,attack:3,defense:1,source:"https://i.pinimg.com/originals/c0/53/f2/c053f2bce4d2375fee8741acfb35d44d.gif"},{_id:"3",name:"Guile",health:45,attack:4,defense:3,source:"https://66.media.tumblr.com/tumblr_lq8g3548bC1qd0wh3o1_400.gif"},{_id:"4",name:"Zangief",health:60,attack:4,defense:1,source:"https://media1.giphy.com/media/nlbIvY9K0jfAA/source.gif"},{_id:"5",name:"Ken",health:45,attack:3,defense:4,source:"https://i.pinimg.com/originals/46/4b/36/464b36a7aecd988e3c51e56a823dbedc.gif"},{_id:"6",name:"Bison",health:45,attack:5,defense:4,source:"http://www.fightersgeneration.com/np5/char/ssf2hd/bison-hdstance.gif"}];function oe(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf(".json"),a=e.substring(t+1,n);return se.find(i=>i._id===a)}async function ce(e){const t=e==="fighters.json"?re:oe(e);return new Promise((n,a)=>{setTimeout(()=>t?n(t):a(Error("Failed to load")),500)})}async function L(e,t="GET"){return ce(e)}var w;class le{constructor(){P(this,w,"fighters.json")}async getFighters(){try{return await L(F(this,w))}catch(t){throw t}}async getFighterDetails(t){try{return await L(`details/fighter/${t}.json`)}catch(n){throw n}}}w=new WeakMap;const S=new le,de=new Map;async function me(e){const t=await S.getFighterDetails(e);return de.set(e,t),t}function he(e){ne(e)}function ge(e){const t=e.filter(Boolean).length===2,n=()=>he(e),a=s({tagName:"div",className:"preview-container___versus-block"}),i=s({tagName:"img",className:"preview-container___versus-img",attributes:{src:ae}}),o=s({tagName:"button",className:`preview-container___fight-btn ${t?"":"disabled"}`});return o.addEventListener("click",n,!1),o.innerText="Fight",a.append(i,o),a}function fe(e){const t=document.querySelector(".preview-container___root"),[n,a]=e,i=H(n,"left"),r=H(a,"right"),o=ge(e);t.innerHTML="",t.append(i,o,r)}function ue(){const e=[];return async(t,n)=>{const a=await me(n),[i,r]=e;(i??a)!==(i?r??a:r)&&e.push(a);const y=[];e.slice(-2).filter(h=>{y.some(c=>c._id===h._id)||y.push(h)}),fe(y)}}function pe(e){const{source:t,name:n}=e;return s({tagName:"img",className:"fighter___fighter-image",attributes:{src:t,title:n,alt:n}})}function ye(e,t){const n=s({tagName:"div",className:"fighters___fighter"}),a=pe(e),i=r=>t(r,e._id);return n.append(a),n.addEventListener("click",i,!1),n}function _e(e){const t=ue(),n=s({tagName:"div",className:"fighters___root"}),a=s({tagName:"div",className:"preview-container___root"}),i=s({tagName:"div",className:"fighters___list"}),r=e.map(o=>ye(o,t));return i.append(...r),n.append(a,i),n}const u=class{static async startApp(){try{u.loadingElement.style.visibility="visible";const t=await S.getFighters(),n=_e(t);u.rootElement.appendChild(n)}catch(t){console.warn(t),u.rootElement.innerText="Failed to load data"}finally{u.loadingElement.style.visibility="hidden"}}};let N=u;E(N,"rootElement",document.getElementById("root")),E(N,"loadingElement",document.getElementById("loading-overlay"));N.startApp();
